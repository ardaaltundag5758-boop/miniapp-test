<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flashy App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --bg: #000000; 
            --card: #111111; 
            --gold: #FFD700;
            --gray: #666666; 
            --nav-red: #FF3B30;
            --premium-blue: #007AFF;
            --rank-apprentice: #00d2ff;
            --rank-adept: #a445f7;
            --rank-master: #ffca28;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: #fff; font-family: 'Inter', -apple-system, sans-serif; overflow: hidden; width: 100%; height: 100vh; }

        /* ELITE WELCOME SCREEN */
        #elite-welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000; z-index: 20000;
            display: flex; flex-direction: column; align-items: center;
            justify-content: space-between; padding: 60px 30px;
            text-align: center; overflow: hidden;
        }
        .stars-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .star { position: absolute; background: #fff; border-radius: 50%; opacity: 0.3; animation: twinkle var(--duration) infinite ease-in-out; }
        @keyframes twinkle { 0%, 100% { opacity: 0.1; transform: translateY(0); } 50% { opacity: 0.6; transform: translateY(-20px); } }
        
        .header-group { z-index: 2; margin-top: 20px; }
        .elite-title { font-size: 2.2rem; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 8px; background: linear-gradient(to bottom, #fff 0%, #888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .sub-title { color: #666; font-size: 1rem; font-weight: 500; }

        .hero-center { position: relative; width: 100%; display: flex; align-items: center; justify-content: center; z-index: 2; }
        .bg-flame { font-size: 180px; opacity: 0.15; position: absolute; filter: blur(2px) drop-shadow(0 0 30px rgba(255, 69, 0, 0.6)); animation: flamePulse 3s infinite alternate; user-select: none; }
        @keyframes flamePulse { from { transform: scale(1); opacity: 0.15; } to { transform: scale(1.1); opacity: 0.25; } }

        .age-highlight { position: relative; z-index: 3; display: flex; flex-direction: column; align-items: center; }
        .age-number { font-size: 6rem; font-weight: 900; line-height: 1; color: #fff; }
        .age-text { font-size: 1.5rem; font-weight: 700; color: #fff; margin-top: 5px; }

        .info-group { z-index: 2; width: 100%; margin-bottom: 30px; }
        .info-line { color: #888; font-size: 0.9rem; margin-bottom: 8px; }
        .info-white { color: #fff; font-weight: 600; }
        .continue-btn-elite { width: 100%; background: #fff; color: #000; border: none; padding: 20px; border-radius: 18px; font-weight: 800; font-size: 1.1rem; cursor: pointer; z-index: 2; }

        /* ESKƒ∞ INTRO VE Dƒ∞ƒûERLERƒ∞ (Gizli ba≈ülar) */
        #intro-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #1a0505 0%, #000 100%); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .intro-avatar { width: 120px; height: 120px; border-radius: 50%; border: 3px solid var(--nav-red); margin-bottom: 15px; object-fit: cover; }
        .intro-level { background: var(--nav-red); color: #fff; padding: 4px 12px; border-radius: 50px; font-size: 0.75rem; font-weight: 800; text-transform: uppercase; margin-bottom: 30px; }
        .intro-age { color: var(--gray); font-size: 1.1rem; margin-bottom: 5px; }
        .intro-points { font-size: 4rem; font-weight: 900; margin-bottom: 40px; color: #fff; text-shadow: 0 0 20px rgba(255,255,255,0.2); }
        .intro-btn { width: 80%; background: #fff; color: #000; border: none; padding: 18px; border-radius: 20px; font-weight: 800; font-size: 1.1rem; cursor: pointer; transition: 0.3s; }
        
        #premium-status-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .prem-icon { font-size: 4rem; margin-bottom: 20px; }
        .prem-msg { font-size: 1.2rem; color: #fff; margin-bottom: 30px; line-height: 1.5; font-weight: 600; }

        #main-app { display: none; }
        .tab-content { display: none; height: calc(100vh - 70px); overflow-y: auto; padding: 20px 20px 100px 20px; }
        .tab-content.active { display: flex; flex-direction: column; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 70px; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); display: grid; grid-template-columns: repeat(2, 1fr); border-top: 1px solid #1a1a1a; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; color: var(--gray); font-size: 0.75rem; font-weight: 600; }
        .nav-item.active { color: #fff; }
        .nav-item.active::after { content: ""; position: absolute; bottom: 8px; width: 20px; height: 3px; background: var(--nav-red); border-radius: 10px; }

        .welcome-header { text-align: center; margin-top: 20px; margin-bottom: 40px; display: flex; flex-direction: column; align-items: center; }
        .avatar-main { width: 85px; height: 85px; border-radius: 50%; border: 2px solid var(--nav-red); padding: 3px; margin-bottom: 10px; object-fit: cover; }
        .rank-badge { font-size: 0.7rem; font-weight: 800; text-transform: uppercase; padding: 4px 12px; border-radius: 8px; margin-bottom: 10px; letter-spacing: 1px; }
        .rank-apprentice { background: rgba(0, 210, 255, 0.15); color: var(--rank-apprentice); border: 1px solid var(--rank-apprentice); }
        .rank-adept { background: rgba(164, 69, 247, 0.15); color: var(--rank-adept); border: 1px solid var(--rank-adept); }
        .rank-master { background: rgba(255, 202, 40, 0.15); color: var(--rank-master); border: 1px solid var(--rank-master); }

        .score-card { background: linear-gradient(145deg, #161616, #0a0a0a); border-radius: 30px; padding: 30px; text-align: center; margin-bottom: 20px; border: 1px solid #222; }
        .score-value { font-size: 3.5rem; font-weight: 900; letter-spacing: -2px; }
        .stat-box { background: var(--card); border-radius: 20px; padding: 20px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .prem-fire-img { width: 35px; height: 35px; }
    </style>
</head>
<body>

<div id="elite-welcome-screen">
    <div class="stars-container" id="stars-box"></div>
    <div class="header-group">
        <div class="elite-title" id="txt-elite-title">ELITE MEMBER</div>
        <div class="sub-title" id="txt-joined-desc">You've joined Telegram</div>
    </div>
    <div class="hero-center">
        <div class="bg-flame">üî•</div>
        <div class="age-highlight">
            <span class="age-number" id="wel-age-num">0</span>
            <span class="age-text" id="wel-age-txt">years ago</span>
        </div>
    </div>
    <div class="info-group">
        <div class="info-line"><span id="txt-acc-num">Your account number is</span> <span class="info-white" id="wel-user-id">#0</span></div>
        <div class="info-line" id="txt-top-percent">You're in the top <span class="info-white">1%</span> Telegram users</div>
    </div>
    <button class="continue-btn-elite" id="btn-wel-continue" onclick="startAfterElite()">CONTINUE</button>
</div>

<div id="intro-screen">
    <img id="intro-pic" class="intro-avatar" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
    <div id="intro-user-name" style="font-weight: 700; margin-bottom: 5px;">User</div>
    <div id="intro-rank" class="intro-level">Apprentice</div>
    <div class="intro-age" id="intro-age-text">... years on Telegram</div>
    <div class="intro-points" id="intro-points-text">0</div>
    <button class="intro-btn" id="btn-continue" onclick="showPremiumStep()">Continue</button>
</div>

<div id="premium-status-screen">
    <div id="prem-icon" class="prem-icon"></div>
    <div id="prem-msg" class="prem-msg"></div>
    <button class="intro-btn" id="btn-end" style="background: var(--nav-red); color: #fff;" onclick="finishIntro()">End</button>
</div>

<div id="main-app">
    <div id="home" class="tab-content active">
        <div class="welcome-header">
            <img id="u-pic" class="avatar-main" src="https://cdn-icons-png.flaticon.com/512/149/149071.png">
            <span id="u-rank" class="rank-badge rank-apprentice">Apprentice</span>
            <h2 id="u-name" style="font-size: 1.4rem;">User</h2>
        </div>
        <div class="score-card">
            <div class="score-value" id="total-flsy">0</div>
            <div id="label-total-points" style="color: var(--gray); font-size: 0.9rem;">Total FLSY Points</div>
        </div>
        <div class="stat-box">
            <div><div id="label-acc-age" style="color: var(--gray); font-size: 0.8rem;">Account Age</div><div id="acc-age" style="font-weight: 700;">... years</div></div>
            <i class="fas fa-calendar-alt" style="color: var(--nav-red);"></i>
        </div>
        <div id="prem-stat-box" class="stat-box" style="display: none;">
            <div><div id="label-premium" style="color: var(--gray); font-size: 0.8rem;">Telegram Premium</div><div id="label-active" style="font-weight: 700; color: var(--premium-blue);">Active</div></div>
            <img class="prem-fire-img" src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Animals%20and%20Nature/Fire.webp?raw=true" alt="Fire">
        </div>
    </div>
    <div id="friends" class="tab-content">
        <h2 id="label-friends-title" style="text-align:center;">Friends</h2>
        <p id="label-coming-soon" style="text-align:center; margin-top:50px; color:var(--gray);">Coming Soon...</p>
    </div>
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')"><i class="fas fa-home"></i><span id="nav-home">Home</span></div>
        <div class="nav-item" onclick="switchTab('friends')"><i class="fas fa-users"></i><span id="nav-friends">Friends</span></div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const RANKS = {
        1: {name: "Apprentice", class: "rank-apprentice"}, 2: {name: "Apprentice", class: "rank-apprentice"}, 3: {name: "Apprentice", class: "rank-apprentice"},
        4: {name: "Adept", class: "rank-adept"}, 5: {name: "Adept", class: "rank-adept"}, 6: {name: "Adept", class: "rank-adept"},
        7: {name: "Master", class: "rank-master"}, 8: {name: "Master", class: "rank-master"}, 9: {name: "Master", class: "rank-master"}, 10: {name: "Master", class: "rank-master"}, 11: {name: "Master", class: "rank-master"}
    };

    const I18N = {
        tr: { elite: "ELƒ∞T √úYE", joined: "Telegram'a katƒ±ldƒ±n", yearsAgo: "yƒ±l √∂nce", accNum: "Hesap numaran:", top: "En iyi %1 Telegram kullanƒ±cƒ±sƒ±ndasƒ±n", btn: "DEVAM ET", yearsOn: "yƒ±ldƒ±r Telegram'da", years: "Yƒ±l", continue: "Devam Et", end: "Bitir", totalPoints: "Toplam FLSY Puanƒ±", accAge: "Hesap Ya≈üƒ±", premium: "Telegram Premium", active: "Aktif", friends: "Arkada≈ülar", soon: "Yakƒ±nda...", home: "Ana Sayfa", premYes: "Harika, Premium kullanƒ±cƒ±sƒ±sƒ±n!<br>Bakiyene ekstra +1,000 FLSY eklendi.", premNo: "Telegram Premium bulunamadƒ±.<br>Ekstra bonus puan kazanƒ±lamadƒ±." },
        en: { elite: "ELITE MEMBER", joined: "You've joined Telegram", yearsAgo: "years ago", accNum: "Your account number is", top: "You're in the top 1% Telegram users", btn: "CONTINUE", yearsOn: "years on Telegram", years: "Years", continue: "Continue", end: "End", totalPoints: "Total FLSY Points", accAge: "Account Age", premium: "Telegram Premium", active: "Active", friends: "Friends", soon: "Coming Soon...", home: "Home", premYes: "You are a Premium user!<br>An extra +1,000 FLSY has been added to your balance.", premNo: "You do not have Telegram Premium.<br>No extra bonus points awarded." },
        ru: { elite: "–≠–õ–ò–¢–ù–´–ô –£–ß–ê–°–¢–ù–ò–ö", joined: "–í—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ Telegram", yearsAgo: "–ª–µ—Ç –Ω–∞–∑–∞–¥", accNum: "–í–∞—à –Ω–æ–º–µ—Ä –∞–∫–∫–∞—É–Ω—Ç–∞:", top: "–í—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ 1% –ª—É—á—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π", btn: "–ü–†–û–î–û–õ–ñ–ò–¢–¨", yearsOn: "–ª–µ—Ç –≤ Telegram", years: "–ª–µ—Ç", continue: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å", end: "–ó–∞–≤–µ—Ä—à–∏—Ç—å", totalPoints: "–í—Å–µ–≥–æ –æ—á–∫–æ–≤ FLSY", accAge: "–í–æ–∑—Ä–∞—Å—Ç –∞–∫–∫–∞—É–Ω—Ç–∞", premium: "Telegram Premium", active: "–ê–∫—Ç–∏–≤–µ–Ω", friends: "–î—Ä—É–∑—å—è", soon: "–°–∫–æ—Ä–æ...", home: "–ì–ª–∞–≤–Ω–∞—è", premYes: "–í—ã Premium-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å!<br>–ö –≤–∞—à–µ–º—É –±–∞–ª–∞–Ω—Å—É –¥–æ–±–∞–≤–ª–µ–Ω–æ +1,000 FLSY.", premNo: "–£ –≤–∞—Å –Ω–µ—Ç Telegram Premium.<br>–ë–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã." }
    };

    let userData = { age: 1, points: 0, isPremium: false };

    function initData() {
        const user = tg.initDataUnsafe.user;
        if (!user) return;
        const userLang = user.language_code === 'tr' ? 'tr' : (user.language_code === 'ru' ? 'ru' : 'en');
        const lang = I18N[userLang];

        // Ya≈ü Logic
        const id = user.id;
        if (id < 50000000) userData.age = 11;
        else if (id < 150000000) userData.age = 10;
        else if (id < 450000000) userData.age = 8;
        else if (id < 1000000000) userData.age = 6;
        else if (id < 5000000000) userData.age = 3;
        else userData.age = 1;

        userData.isPremium = user.is_premium || false;
        userData.points = (userData.age * 450) + (userData.isPremium ? 1000 : 0);

        // Elite Screen Update
        document.getElementById('txt-elite-title').innerText = lang.elite;
        document.getElementById('txt-joined-desc').innerText = lang.joined;
        document.getElementById('wel-age-num').innerText = userData.age;
        document.getElementById('wel-age-txt').innerText = lang.yearsAgo;
        document.getElementById('txt-acc-num').innerText = lang.accNum;
        document.getElementById('wel-user-id').innerText = "#" + user.id;
        document.getElementById('txt-top-percent').innerHTML = lang.top.replace("1%", '<span class="info-white">1%</span>');
        document.getElementById('btn-wel-continue').innerText = lang.btn;

        // UI Update
        document.getElementById('intro-age-text').innerText = userData.age + " " + lang.yearsOn;
        document.getElementById('acc-age').innerText = userData.age + " " + lang.years;
        document.getElementById('btn-continue').innerText = lang.continue;
        document.getElementById('btn-end').innerText = lang.end;
        document.getElementById('label-total-points').innerText = lang.totalPoints;
        document.getElementById('label-acc-age').innerText = lang.accAge;
        document.getElementById('label-premium').innerText = lang.premium;
        document.getElementById('label-active').innerText = lang.active;
        document.getElementById('label-friends-title').innerText = lang.friends;
        document.getElementById('label-coming-soon').innerText = lang.soon;
        document.getElementById('nav-home').innerText = lang.home;
        document.getElementById('nav-friends').innerText = lang.friends;
        document.getElementById('intro-user-name').innerText = user.first_name;
        document.getElementById('u-name').innerText = user.first_name;
        document.getElementById('intro-points-text').innerText = userData.points;
        document.getElementById('total-flsy').innerText = userData.points.toLocaleString();
        
        const rankData = RANKS[userData.age] || {name: "Apprentice", class: "rank-apprentice"};
        document.getElementById('intro-rank').innerText = rankData.name;
        const uRankEl = document.getElementById('u-rank');
        uRankEl.innerText = rankData.name;
        uRankEl.className = `rank-badge ${rankData.class}`;

        if(user.photo_url) {
            document.getElementById('intro-pic').src = user.photo_url;
            document.getElementById('u-pic').src = user.photo_url;
        }
        if(userData.isPremium) document.getElementById('prem-stat-box').style.display = 'flex';

        if (localStorage.getItem('flashy_onboarded')) {
            document.getElementById('elite-welcome-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
        }
        createStars();
    }

    function createStars() {
        const box = document.getElementById('stars-box');
        for (let i = 0; i < 40; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3 + 'px';
            star.style.width = size; star.style.height = size;
            star.style.left = Math.random() * 100 + '%'; star.style.top = Math.random() * 100 + '%';
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            box.appendChild(star);
        }
    }

    function startAfterElite() {
        document.getElementById('elite-welcome-screen').style.display = 'none';
        document.getElementById('intro-screen').style.display = 'flex';
        tg.HapticFeedback.impactOccurred('medium');
    }

    function showPremiumStep() {
        const user = tg.initDataUnsafe.user;
        const userLang = user?.language_code === 'tr' ? 'tr' : (user?.language_code === 'ru' ? 'ru' : 'en');
        const lang = I18N[userLang];
        document.getElementById('intro-screen').style.display = 'none';
        const premScreen = document.getElementById('premium-status-screen');
        const icon = document.getElementById('prem-icon');
        const msg = document.getElementById('prem-msg');
        premScreen.style.display = 'flex';
        if (userData.isPremium) { icon.innerHTML = "üåü"; msg.innerHTML = lang.premYes; }
        else { icon.innerHTML = "üë§"; msg.innerHTML = lang.premNo; }
        tg.HapticFeedback.impactOccurred('medium');
    }

    function finishIntro() {
        localStorage.setItem('flashy_onboarded', 'true');
        document.getElementById('premium-status-screen').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        tg.HapticFeedback.notificationOccurred('success');
    }

    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(i => {
            i.classList.remove('active');
            if(i.getAttribute('onclick').includes(tabId)) i.classList.add('active');
        });
        tg.HapticFeedback.impactOccurred('light');
    }

    window.onload = initData;
</script>
</body>
</html>
