<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flashy App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --bg: #000000; 
            --white: #ffffff;
            --gray: #888888;
            --nav-red: #FF3B30;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--white); font-family: 'Inter', -apple-system, sans-serif; overflow: hidden; }

        /* --- ONBOARDING SCREEN --- */
        #elite-welcome-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg); z-index: 20000;
            display: flex; flex-direction: column; align-items: center;
            justify-content: space-between; padding: 60px 25px;
            text-align: center;
        }

        .top-joined-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--white);
            margin-top: 20px;
        }

        .hero-center {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .bg-flame {
            width: 250px;
            height: 250px;
            z-index: 1;
        }

        .age-overlay {
            position: absolute;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none;
            margin-top: 10px; /* AteÅŸin Ã¼zerine tam oturmasÄ± iÃ§in */
        }

        .age-number {
            font-size: 5.5rem;
            font-weight: 900;
            line-height: 1;
            color: var(--white);
            text-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .age-subtext {
            font-size: 1.4rem;
            font-weight: 700;
            margin-top: -5px;
        }

        .footer-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .acc-id-text {
            font-size: 0.95rem;
            color: var(--gray);
        }

        .top-percent-text {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--white);
        }

        .continue-btn {
            width: 100%;
            background: var(--white);
            color: #000;
            border: none;
            padding: 18px;
            border-radius: 16px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.1s ease;
        }
        .continue-btn:active { transform: scale(0.97); }

        /* --- ANA UYGULAMA GÄ°ZLÄ° BAÅžLAR --- */
        #main-app { display: none; }
    </style>
</head>
<body>

<div id="elite-welcome-screen">
    <div class="top-joined-text">You've joined Telegram</div>

    <div class="hero-center">
        <img class="bg-flame" src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Animals%20and%20Nature/Fire.webp?raw=true" alt="Flame">
        <div class="age-overlay">
            <span class="age-number" id="wel-age-num">0</span>
            <span class="age-subtext">years ago</span>
        </div>
    </div>

    <div class="footer-info">
        <div class="acc-id-text">Your account number is <span id="wel-user-id" style="color: #fff; font-weight: 600;">#0</span></div>
        <div class="top-percent-text" id="top-rank-text">You're in the Top 0% Telegram users ðŸ”¥</div>
    </div>

    <button class="continue-btn" onclick="startAfterElite()">Continue</button>
</div>

<div id="main-app">
    <div style="padding: 50px; text-align: center;">Main App Loaded</div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    function initOnboarding() {
        const user = tg.initDataUnsafe.user || { id: 5800000000, first_name: "User" }; // Fallback for browser
        const userId = user.id;

        // 1. YaÅŸ Hesaplama (ID AralÄ±ÄŸÄ±na GÃ¶re Tahmini)
        let age = 1;
        if (userId < 100000000) age = 11;
        else if (userId < 250000000) age = 10;
        else if (userId < 500000000) age = 8;
        else if (userId < 1000000000) age = 6;
        else if (userId < 2000000000) age = 4;
        else if (userId < 5000000000) age = 2;
        else age = 1;

        // 2. GerÃ§ekÃ§i YÃ¼zde Hesaplama 
        // Telegram'Ä±n yaklaÅŸÄ±k 900M+ kullanÄ±cÄ±sÄ± var. 
        // DÃ¼ÅŸÃ¼k ID'li kullanÄ±cÄ±lar daha eski ve daha kÃ¼Ã§Ã¼k bir azÄ±nlÄ±ktadÄ±r.
        let percent = 1;
        if (userId > 5000000000) percent = 45;
        else if (userId > 2000000000) percent = 25;
        else if (userId > 1000000000) percent = 12;
        else if (userId > 500000000) percent = 5;
        else percent = 1;

        // Verileri Ekrana Bas
        document.getElementById('wel-age-num').innerText = age;
        document.getElementById('wel-user-id').innerText = "#" + userId;
        document.getElementById('top-rank-text').innerText = `You're in the Top ${percent}% Telegram users ðŸ”¥`;

        // Daha Ã¶nce girmiÅŸse atla
        if (localStorage.getItem('flashy_done')) {
            showMain();
        }
    }

    function startAfterElite() {
        tg.HapticFeedback.impactOccurred('medium');
        // Ä°kinci adÄ±ma (Premium kontrolÃ¼ gibi) veya direkt ana uygulamaya geÃ§iÅŸ
        localStorage.setItem('flashy_done', 'true');
        showMain();
    }

    function showMain() {
        document.getElementById('elite-welcome-screen').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
    }

    window.onload = initOnboarding;
</script>

</body>
</html>
